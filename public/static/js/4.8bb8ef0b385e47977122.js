webpackJsonp([4],{L0pl:function(t,a){},UCxz:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("TVG1"),s=e("lbHh"),i=e.n(s),n={name:"pay",data:function(){return{totalTime:180,totalMoney:null,canPay:!1,curTime:null,timer:null,foods:[]}},computed:{getPrice:function(){return this.$route.params.price},getFoods:function(){return this.$route.params.foods}},watch:{getPrice:function(t){this.totalMoney=t},getFoods:function(t){this.foods=t}},methods:{goPay:function(){var t=this;this.canPay?o.a.ajax.post("/api/client/user/pay",{shopId:i.a.get("shopId"),userId:i.a.get("userId"),foods:this.foods,money:this.totalMoney,payWay:3,status:3}).then(function(a){1==a.data.status?(alert("支付成功"),t.$store.commit("reduceMoney",t.totalMoney),t.$router.go(-1)):alert(a.data.msg)}):alert("选择支付方式")},timerInit:function(){var t=this;this.timer=setInterval(function(){if(t.totalTime--,t.totalTime>0){var a=Math.floor(t.totalTime/60),e=Math.floor(t.totalTime%60);a=a<10?"0"+a:a,e=e<10?"0"+e:e,t.curTime=a+":"+e}else clearInterval(t.timer)},1e3)}},mounted:function(){this.timerInit(),this.totalMoney=this.$route.params.price,this.foods=this.$route.params.foods}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"payView"},[e("mu-card",[e("mu-card-title",{attrs:{title:"￥"+t.totalMoney,subTitle:"支付剩余时间"+t.curTime}}),t._v(" "),e("mu-list",[e("mu-sub-header",[t._v("购买商品")]),t._v(" "),t._l(t.foods,function(a,o){return e("mu-list-item",{key:o,attrs:{title:a.name}},[e("mu-avatar",{attrs:{slot:"leftAvatar",src:a.image},slot:"leftAvatar"}),t._v(" "),e("span",{attrs:{slot:"right"},slot:"right"},[t._v(t._s(a.count))])],1)})],2),t._v(" "),e("mu-list",[e("mu-sub-header",[t._v("支付方式")]),t._v(" "),e("mu-list-item",{attrs:{disableRipple:"",title:"钱包"}},[e("mu-icon",{attrs:{slot:"left",value:"account_balance_wallet",color:"#ed3f14"},slot:"left"}),t._v(" "),e("mu-checkbox",{attrs:{slot:"right"},slot:"right",model:{value:t.canPay,callback:function(a){t.canPay=a},expression:"canPay"}})],1)],1)],1),t._v(" "),e("mu-raised-button",{staticClass:"pay",attrs:{fullWidth:"",backgroundColor:"#495060"},on:{click:t.goPay}},[e("span",{staticClass:"tint"},[t._v("确认支付 ￥")]),t._v(" "),e("span",{staticClass:"money"},[t._v(t._s(t.totalMoney))])])],1)},staticRenderFns:[]};var l=e("VU/8")(n,r,!1,function(t){e("L0pl")},"data-v-5f8898a8",null);a.default=l.exports}});
//# sourceMappingURL=4.8bb8ef0b385e47977122.js.map