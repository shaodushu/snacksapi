webpackJsonp([7],{Cs6B:function(t,e){},v6mk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),o=a("exGp"),r=a.n(o),c=a("ybdn"),s=a("TVG1"),p={data:function(){return{AMapUI:null,AMap:null,map:null}},methods:{initMap:function(){var t=this,e=this.AMapUI=window.AMapUI,a=this.AMap=window.AMap;e.loadUI(["misc/PositionPicker"],function(e){t.map=new a.Map("container",{zoom:14,center:[121.82194,39.10041]}),a.plugin(["AMap.Geolocation"],function(){var e={enableHighAccuracy:!0,timeout:1e4,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new a.Pixel(10,20),showMarker:!0,showCircle:!1,panToLocation:!0,zoomToAccuracy:!0},n=new a.Geolocation(e);t.map.addControl(n),n.getCurrentPosition(),a.event.addListener(n,"complete",function(e){t.getMarker(e.position.getLng(),e.position.getLat(),5e3)}),a.event.addListener(n,"error",function(t){console.log(t)})})})},getMarker:function(t,e,a){var n=this,i=this.AMapUI=window.AMapUI,o=this.AMap=window.AMap;s.a.ajax.post("/api/client/shop/circum",{lng:t,lat:e,radius:a}).then(function(t){i.loadUI(["overlay/SimpleMarker"],function(e){t.data.data.forEach(function(t){var a=new e({iconStyle:{src:t.image,style:{width:"45px",height:"45px","border-radius":"100%",border:"3px solid #5cadff"}},offset:new o.Pixel(-10,-30),map:n.map,showPositionPoint:!1,position:[t.longitude,t.latitude],zIndex:200,animation:"AMAP_ANIMATION_DROP"});a.extData={id:t.id},o.event.addListener(a,"touchstart",function(t){n.$router.push({name:"shop",params:{id:t.target.extData.id}}),n.$store.commit("changeShopId",t.target.extData.id)})})})}).catch(function(t){return console.log(t)})}},created:function(){var t=this;return r()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.AMap||!window.AMapUI){e.next=4;break}t.initMap(),e.next=9;break;case 4:return e.next=6,Object(c.a)("https://webapi.amap.com/maps?v=1.4.6&key=c42fafbe4ea7bdba7423b409392a4a2b");case 6:return e.next=8,Object(c.a)("https://webapi.amap.com/ui/1.0/main.js");case 8:t.initMap();case 9:case"end":return e.stop()}},e,t)}))()}},u={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticStyle:{width:"100%",height:"100vh"},attrs:{id:"container"}})},staticRenderFns:[]};var d=a("VU/8")(p,u,!1,function(t){a("Cs6B")},"data-v-0a10d834",null);e.default=d.exports}});
//# sourceMappingURL=7.94262b8e0c2597dde546.js.map