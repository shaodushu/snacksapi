{"version":3,"sources":["webpack:///./node_modules/core-js/library/modules/_object-gops.js","webpack:///src/views/shop/index.vue","webpack:///./src/views/shop/index.vue?256b","webpack:///./src/views/shop/index.vue","webpack:///./node_modules/core-js/library/modules/_object-pie.js","webpack:///./node_modules/core-js/library/modules/es6.object.assign.js","webpack:///./node_modules/core-js/library/modules/_object-assign.js","webpack:///./node_modules/core-js/library/fn/object/assign.js","webpack:///src/views/ratings/index.vue","webpack:///./src/views/ratings/index.vue?109e","webpack:///./src/views/ratings/index.vue","webpack:///src/views/goods/index.vue","webpack:///./src/views/goods/index.vue?0c51","webpack:///./src/views/goods/index.vue","webpack:///./node_modules/babel-runtime/core-js/object/assign.js"],"names":["exports","f","Object","getOwnPropertySymbols","name","data","seller","activeTab","components","s-header","goods-view","goods","ratings-view","ratings","computed","curShopId","this","$store","state","shopId","watch","val","_this","getSeller","then","res","assign_default","methods","handleTabChange","promise_default","a","resolve","reject","util","ajax","post","js_cookie_default","get","catch","err","created","_this2","views_shop","render","_vm","_h","$createElement","_c","_self","attrs","id","_v","value","on","change","title","directives","rawName","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","shop","ssrContext","__webpack_exports__","propertyIsEnumerable","$export","S","F","assign","getKeys","gOPS","pIE","toObject","IObject","$assign","module","A","B","Symbol","K","split","forEach","k","keys","join","target","source","T","aLen","arguments","length","index","getSymbols","isEnum","key","concat","j","call","props","type","selectType","onlyContent","result","needShow","text","selectRating","$nextTick","$refs","refresh","toggleContent","_this3","filters","formatDate","time","date","Date","js_date","scroll","star","ratingselect","views_ratings","ref","staticClass","_l","rating","rateType","width","height","src","_s","size","score","deliveryTime","recommend","item","_f","rateTime","foodsList","listHeight","scrollY","_initHeight","selectedFood","cartcontrol","shopcart","food","currentIndex","i","l","height1","height2","selectFoods","foods","count","push","loadData","mounted","selectFood","event","_constructed","drop","addFood","foodsScroll","pos","Math","abs","round","y","menuList","menuWrapper","$el","getElementsByClassName","scrollToElement","_countHeight","foodsWrapper","clientHeight","foodList","selectMenu","e","el","error","console","log","views_goods","class","current","click","$event","probeType","listenScroll","image","description","sellCount","add","price","oldPrice","select-foods","default","__esModule"],"mappings":"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","file":"static/js/1.9b1e5fe42580d74841eb.js","sourcesContent":["exports.f = Object.getOwnPropertySymbols;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gops.js\n// module id = 1kS7\n// module chunks = 1 2","<template>\r\n  <div id=\"shop\">\r\n    <s-header :seller=\"seller\"></s-header>\r\n    <mu-tabs :value=\"activeTab\" @change=\"handleTabChange\">\r\n        <mu-tab value=\"tab1\" title=\"商品\"/>\r\n        <mu-tab value=\"tab2\" title=\"评论\"/>\r\n    </mu-tabs>\r\n    <goods-view v-show=\"activeTab === 'tab1'\"></goods-view> \r\n    <ratings-view  v-show=\"activeTab === 'tab2'\" :seller=\"seller\"></ratings-view>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { header } from \"@/components\";\r\nimport Fingerprint from \"fingerprintjs\";\r\nimport Util from \"@/libs/util\";\r\nimport Cookies from \"js-cookie\";\r\nimport goodsView from \"@/views/goods\";\r\nimport ratingsView from \"@/views/ratings\";\r\nexport default {\r\n  name: \"shop\",\r\n  data() {\r\n    return {\r\n      seller: {},\r\n      activeTab: \"tab1\"\r\n    };\r\n  },\r\n  components: {\r\n    \"s-header\": header,\r\n    \"goods-view\": goodsView,\r\n    \"ratings-view\": ratingsView\r\n  },\r\n  computed: {\r\n    curShopId() {\r\n      return this.$store.state.shopId;\r\n    }\r\n  },\r\n  watch: {\r\n    curShopId(val) {\r\n      // this.loadData();\r\n      this.getSeller(val).then(res => {\r\n        this.seller = Object.assign({}, this.seller, res.data.data);\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    handleTabChange(val) {\r\n      this.activeTab = val;\r\n    },\r\n    getSeller(shopId) {\r\n      // return new Promise((resolve, reject) => {\r\n      //   Util.ajax\r\n      //     .get(\"/api/seller?id=\" + shopId)\r\n      //     .then(res => resolve(res))\r\n      //     .catch(err => reject(err));\r\n      // });\r\n      return new Promise((resolve, reject) => {\r\n        Util.ajax\r\n          .post(\"/api/client/shop/readOne\", {\r\n            shopId: Cookies.get('shopId')\r\n          })\r\n          .then(res => resolve(res))\r\n          .catch(err => reject(err));\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    this.getSeller(this.$store.state.shopId).then(res => {\r\n      this.seller = Object.assign({}, this.seller, res.data.data);\r\n    });\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/shop/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"shop\"}},[_c('s-header',{attrs:{\"seller\":_vm.seller}}),_vm._v(\" \"),_c('mu-tabs',{attrs:{\"value\":_vm.activeTab},on:{\"change\":_vm.handleTabChange}},[_c('mu-tab',{attrs:{\"value\":\"tab1\",\"title\":\"商品\"}}),_vm._v(\" \"),_c('mu-tab',{attrs:{\"value\":\"tab2\",\"title\":\"评论\"}})],1),_vm._v(\" \"),_c('goods-view',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeTab === 'tab1'),expression:\"activeTab === 'tab1'\"}]}),_vm._v(\" \"),_c('ratings-view',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeTab === 'tab2'),expression:\"activeTab === 'tab2'\"}],attrs:{\"seller\":_vm.seller}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b6109456\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/shop/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b6109456\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b6109456\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b6109456\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/shop/index.vue\n// module id = null\n// module chunks = ","exports.f = {}.propertyIsEnumerable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-pie.js\n// module id = NpIQ\n// module chunks = 1 2","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.assign.js\n// module id = R4wc\n// module chunks = 1 2","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-assign.js\n// module id = To3L\n// module chunks = 1 2","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/assign.js\n// module id = V3tA\n// module chunks = 1 2","<template>\r\n  <scroll class=\"ratings\"\r\n            :data=\"ratings\"\r\n            ref=\"ratings\">\r\n            <div class=\"ratings-content\">\r\n      <!-- <div class=\"overview\">\r\n        <div class=\"overview-left\">\r\n          <h1 class=\"score\">{{seller.score}}</h1>\r\n          <div class=\"title\">综合评分</div>\r\n          <div class=\"rank\">高于周边商家{{seller.rankRate}}%</div>\r\n        </div>\r\n        <div class=\"overview-right\">\r\n          <div class=\"score-wrapper\">\r\n            <span class=\"title\">服务态度</span>\r\n            <star :size=\"36\" :score=\"seller.serviceScore\"></star>\r\n            <span class=\"score\">{{seller.serviceScore}}</span>\r\n          </div>\r\n          <div class=\"score-wrapper\">\r\n            <span class=\"title\">商品评分</span>\r\n            <star :size=\"36\" :score=\"seller.foodScore\"></star>\r\n            <span class=\"score\">{{seller.foodScore}}</span>\r\n          </div>\r\n          <div class=\"delivery-wrapper\">\r\n            <span class=\"title\">送达时间</span>\r\n            <span class=\"delivery\">{{seller.deliveryTime}}分钟</span>\r\n          </div>\r\n        </div>\r\n      </div> -->\r\n      <!-- <split></split> -->\r\n      <!-- <ratingselect @select=\"selectRating\" @toggle=\"toggleContent\" :selectType=\"selectType\" :onlyContent=\"onlyContent\"\r\n                    :ratings=\"ratings\"/> -->\r\n     \r\n     \r\n      <div class=\"rating-wrapper\">\r\n        <ul>\r\n          <li v-for=\"(rating,index) in ratings\" v-show=\"needShow(rating.rateType, rating.text)\" class=\"rating-item\" :key=\"index\"> \r\n            <div class=\"avatar\">\r\n              <img width=\"28\" height=\"28\" src=\"http://static.galileo.xiaojukeji.com/static/tms/default_header.png\">\r\n            </div>\r\n            <div class=\"content\">\r\n              <h1 class=\"name\">{{rating.name}}</h1>\r\n              <div class=\"star-wrapper\">\r\n                <star :size=\"24\" :score=\"rating.score\"></star>\r\n                <span class=\"delivery\" v-show=\"rating.deliveryTime\">{{rating.deliveryTime}}</span>\r\n              </div>\r\n              <p class=\"text\">{{rating.text}}</p>\r\n              <div class=\"recommend\" v-show=\"rating.recommend && rating.recommend.length\">\r\n                <span class=\"icon-thumb_up\"></span>\r\n                <span class=\"item\" v-for=\"(item,index) in rating.recommend\" :key=\"index\">{{item}}</span>\r\n              </div>\r\n              <div class=\"time\">\r\n                {{rating.rateTime | formatDate}}\r\n              </div>\r\n            </div>\r\n          </li>\r\n         \r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </scroll>\r\n  \r\n</template>\r\n\r\n<script>\r\nimport { scroll, star, ratingselect, split } from \"@/components\";\r\nimport { formatDate } from \"@/common/js/date\";\r\nimport Util from \"@/libs/util\";\r\nimport Cookies from \"js-cookie\";\r\nconst ALL = 2;\r\nconst ERR_OK = 0;\r\n//const debug = process.env.NODE_ENV !== \"production\";\r\nexport default {\r\n  name:'ratings',\r\n  props: {\r\n    seller: {\r\n      type: Object\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      ratings: [],\r\n      selectType: ALL,\r\n      onlyContent: true\r\n    };\r\n  },\r\n  created() {\r\n    // Util.ajax.get(\"/api/ratings\").then(res => {\r\n    //   this.ratings = res.data.data;\r\n    // });\r\n     Util.ajax.post(\"/api/client/shop/ratings\",{\r\n       shopId:Cookies.get('shopId')\r\n     }).then(res => {\r\n      this.ratings = res.data.result;\r\n    });\r\n  },\r\n  methods: {\r\n    needShow(type, text) {\r\n      if (this.onlyContent && !text) {\r\n        return false;\r\n      }\r\n      if (this.selectType === ALL) {\r\n        return true;\r\n      } else {\r\n        return type === this.selectType;\r\n      }\r\n    },\r\n    selectRating(type) {\r\n      this.selectType = type;\r\n      this.$nextTick(() => {\r\n        this.$refs.ratings.refresh();\r\n      });\r\n    },\r\n    toggleContent() {\r\n      this.onlyContent = !this.onlyContent;\r\n      this.$nextTick(() => {\r\n        this.$refs.ratings.refresh();\r\n      });\r\n    }\r\n  },\r\n  filters: {\r\n    formatDate(time) {\r\n      let date = new Date(time);\r\n      return formatDate(date, \"yyyy-MM-dd hh:mm\");\r\n    }\r\n  },\r\n  components: {\r\n    scroll,\r\n    star,\r\n    split,\r\n    ratingselect\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.ratings {\r\n  position: absolute;\r\n  top: 147px;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  overflow: hidden;\r\n  .overview {\r\n    display: flex;\r\n    padding: 18px 0;\r\n    .overview-left {\r\n      flex: 0 0 137px;\r\n      padding: 6px 0;\r\n      width: 137px;\r\n      border-right: 1px solid rgba(7, 17, 27, 0.1);\r\n      text-align: center;\r\n      @media only screen and (max-width: 320px) {\r\n        flex: 0 0 120px;\r\n        width: 120px;\r\n      }\r\n\r\n      .score {\r\n        margin-bottom: 6px;\r\n        line-height: 28px;\r\n        font-size: 24px;\r\n        color: rgb(255, 153, 0);\r\n      }\r\n\r\n      .title {\r\n        margin-bottom: 8px;\r\n        line-height: 12px;\r\n        font-size: 12px;\r\n        color: rgb(7, 17, 27);\r\n      }\r\n\r\n      .rank {\r\n        line-height: 10px;\r\n        font-size: 10px;\r\n        color: rgb(147, 153, 159);\r\n      }\r\n    }\r\n    .overview-right {\r\n      flex: 1;\r\n      padding: 6px 0 6px 24px;\r\n      @media only screen and (max-width: 320px) {\r\n        padding-left: 6px;\r\n      }\r\n\r\n      .score-wrapper {\r\n        margin-bottom: 8px;\r\n        font-size: 0;\r\n        .title {\r\n          display: inline-block;\r\n          line-height: 18px;\r\n          vertical-align: top;\r\n          font-size: 12px;\r\n          color: rgb(7, 17, 27);\r\n        }\r\n\r\n        .star {\r\n          display: inline-block;\r\n          margin: 0 12px;\r\n          vertical-align: top;\r\n        }\r\n\r\n        .score {\r\n          display: inline-block;\r\n          line-height: 18px;\r\n          vertical-align: top;\r\n          font-size: 12px;\r\n          color: rgb(255, 153, 0);\r\n        }\r\n      }\r\n      .delivery-wrapper {\r\n        font-size: 0;\r\n        .title {\r\n          line-height: 18px;\r\n          font-size: 12px;\r\n          color: rgb(7, 17, 27);\r\n        }\r\n\r\n        .delivery {\r\n          margin-left: 12px;\r\n          font-size: 12px;\r\n          color: rgb(147, 153, 159);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .rating-wrapper {\r\n    padding: 0 18px;\r\n    .rating-item {\r\n      display: flex;\r\n      padding: 18px 0;\r\n      //border-1px(rgba(7, 17, 27, 0.1))\r\n      .avatar {\r\n        flex: 0 0 28px;\r\n        width: 28px;\r\n        margin-right: 12px;\r\n        img {\r\n          border-radius: 50%;\r\n        }\r\n      }\r\n\r\n      .content {\r\n        position: relative;\r\n        flex: 1;\r\n        .name {\r\n          margin-bottom: 4px;\r\n          line-height: 12px;\r\n          font-size: 10px;\r\n          color: rgb(7, 17, 27);\r\n        }\r\n\r\n        .star-wrapper {\r\n          margin-bottom: 6px;\r\n          font-size: 0;\r\n          .star {\r\n            display: inline-block;\r\n            margin-right: 6px;\r\n            vertical-align: top;\r\n          }\r\n\r\n          .delivery {\r\n            display: inline-block;\r\n            vertical-align: top;\r\n            line-height: 12px;\r\n            font-size: 10px;\r\n            color: rgb(147, 153, 159);\r\n          }\r\n        }\r\n        .text {\r\n          margin-bottom: 8px;\r\n          line-height: 18px;\r\n          color: rgb(7, 17, 27);\r\n          font-size: 12px;\r\n        }\r\n\r\n        .recommend {\r\n          line-height: 16px;\r\n          font-size: 0;\r\n          .icon-thumb_up,\r\n          .item {\r\n            display: inline-block;\r\n            margin: 0 8px 4px 0;\r\n            font-size: 9px;\r\n          }\r\n\r\n          .icon-thumb_up {\r\n            color: rgb(0, 160, 220);\r\n          }\r\n\r\n          .item {\r\n            padding: 0 6px;\r\n            border: 1px solid rgba(7, 17, 27, 0.1);\r\n            border-radius: 1px;\r\n            color: rgb(147, 153, 159);\r\n            background: #fff;\r\n          }\r\n        }\r\n        .time {\r\n          position: absolute;\r\n          top: 0;\r\n          right: 0;\r\n          line-height: 12px;\r\n          font-size: 10px;\r\n          color: rgb(147, 153, 159);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/ratings/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('scroll',{ref:\"ratings\",staticClass:\"ratings\",attrs:{\"data\":_vm.ratings}},[_c('div',{staticClass:\"ratings-content\"},[_c('div',{staticClass:\"rating-wrapper\"},[_c('ul',_vm._l((_vm.ratings),function(rating,index){return _c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.needShow(rating.rateType, rating.text)),expression:\"needShow(rating.rateType, rating.text)\"}],key:index,staticClass:\"rating-item\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"width\":\"28\",\"height\":\"28\",\"src\":\"http://static.galileo.xiaojukeji.com/static/tms/default_header.png\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('h1',{staticClass:\"name\"},[_vm._v(_vm._s(rating.name))]),_vm._v(\" \"),_c('div',{staticClass:\"star-wrapper\"},[_c('star',{attrs:{\"size\":24,\"score\":rating.score}}),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(rating.deliveryTime),expression:\"rating.deliveryTime\"}],staticClass:\"delivery\"},[_vm._v(_vm._s(rating.deliveryTime))])],1),_vm._v(\" \"),_c('p',{staticClass:\"text\"},[_vm._v(_vm._s(rating.text))]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(rating.recommend && rating.recommend.length),expression:\"rating.recommend && rating.recommend.length\"}],staticClass:\"recommend\"},[_c('span',{staticClass:\"icon-thumb_up\"}),_vm._v(\" \"),_vm._l((rating.recommend),function(item,index){return _c('span',{key:index,staticClass:\"item\"},[_vm._v(_vm._s(item))])})],2),_vm._v(\" \"),_c('div',{staticClass:\"time\"},[_vm._v(\"\\n              \"+_vm._s(_vm._f(\"formatDate\")(rating.rateTime))+\"\\n            \")])])])}))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-241a5147\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/ratings/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-241a5147\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-241a5147\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-241a5147\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/ratings/index.vue\n// module id = null\n// module chunks = ","<template>\n<div>\n  <div class=\"snacks\">\n    <scroll class=\"menu-wrapper\"\n            :data=\"foodsList\"\n            ref=\"menuWrapper\">\n      <ul>\n        <li \n          v-for=\"(item,index) in foodsList\" \n          :key=\"index\" class=\"menu-item\" \n          :class=\"{'current': currentIndex === index}\" \n          @click=\"selectMenu(index,$event)\"\n          >\n          <span class=\"text\">\n\t\t\t\t\t\t\t{{item.name}}\n\t\t\t\t\t</span>\n        </li>\n      </ul>\n      <div class=\"loading-wrapper\"></div>\n    </scroll>\n    <scroll class=\"foods-wrapper\"\n            :data=\"foodsList\"\n            ref=\"foodsWrapper\"\n            :probeType=\"3\"\n            :listenScroll=\"true\"\n            @scroll=\"foodsScroll\">\n      <ul>\n        <li v-for=\"(item,index) in foodsList\" :key=\"index\" class=\"food-list food-list-hook\">\n          <h1 class=\"title\">{{item.name}}</h1>\n          <ul>\n            <li @click=\"selectFood(food,$event)\" v-for=\"(food,index) in item.foods\" class=\"food-item\" :key=\"index\">\n              <div class=\"icon\">\n\t\t\t\t\t\t\t\t\t<img :src=\"food.image\" width=\"57\" height=\"57\" />\n\t\t\t\t\t\t\t</div>\n              <div class=\"content\">\n                \n\t\t\t\t\t\t\t\t\t<h2 class=\"name\">{{food.name}}</h2>\n                  <p class=\"desc\">{{food.description}}</p>\n                  \n                  <div class=\"extra\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"count\">月售{{food.sellCount}}份</span>\n\t\t\t\t\t\t\t\t\t\t<span>好评率{{food.rating}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n                  <div class=\"cartControl-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<cartcontrol @add=\"addFood\" :food=\"food\"></cartcontrol>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"price\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"now\">¥{{food.price}}</span><span class=\"old\" v-show=\"food.oldPrice\">¥{{food.oldPrice}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n                  \n\t\t\t\t\t\t\t\t</div>\n            </li>\n          </ul>\n        </li>\n      </ul>\n      <div class=\"loading-wrapper\"></div>\n    </scroll>\n    <shopcart ref=\"shopcart\" :select-foods=\"selectFoods\" ></shopcart>\n  </div>\n  <!-- <food @add=\"addFood\" :food=\"selectedFood\" ref=\"food\"></food> -->\n</div>\n  \n</template>\n<script>\nimport { scroll, cartcontrol, shopcart, food } from \"@/components\";\nimport Util from \"@/libs/util\";\nimport Cookies from \"js-cookie\";\nexport default {\n  name: \"goods\",\n  data() {\n    return {\n      foodsList: [],\n      listHeight: [],\n      scrollY: 0,\n      _initHeight: null,\n      selectedFood: {}\n    };\n  },\n  components: {\n    scroll,\n    cartcontrol,\n    shopcart,\n    food\n  },\n  computed: {\n    currentIndex() {\n      //根据滚动高度处于foods-list高度某个区间内，得到当前索引\n      for (let i = 0, l = this.listHeight.length; i < l; i++) {\n        let height1 = this.listHeight[i];\n        let height2 = this.listHeight[i + 1];\n        if (!height2 || (this.scrollY >= height1 && this.scrollY < height2)) {\n          return i;\n        }\n      }\n      return 0;\n    },\n    selectFoods() {\n      let foods = [];\n      this.foodsList.forEach(item => {\n        item.foods.forEach(food => {\n          if (food.count) {\n            foods.push(food);\n          }\n        });\n      });\n      return foods;\n    },\n    curShopId(){\n        return this.$store.state.shopId;\n    }\n  },\n  watch:{\n    curShopId(val){\n      this.loadData();\n    }\n  },\n  mounted() {\n    this.loadData();\n  },\n  methods: {\n    selectFood(food, event) {\n      if (!event._constructed) {\n        return;\n      }\n      this.selectedFood = food;\n      //this.$refs.food.show();\n    },\n    drop(target) {\n      //体验优化，异步执行下落动画\n      this.$nextTick(() => {\n        this.$refs.shopcart.drop(target);\n      });\n    },\n    addFood(target) {\n      this.drop(target);\n    },\n    foodsScroll(pos) {\n      //获取food-list滚动高度\n      this.scrollY = Math.abs(Math.round(pos.y));\n      //food-list滚动，菜单指向对应项\n      let menuList = this.$refs.menuWrapper.$el.getElementsByClassName(\n        \"menu-item\"\n      );\n      this.$refs.menuWrapper.scrollToElement(\n        menuList[this.currentIndex],\n        300,\n        0,\n        this._initHeight\n      );\n    },\n    _countHeight() {\n      //初始化设置高度-使menu当前索引切换时，food类别抵达屏幕可视区域中部\n      this._initHeight = -Math.round(\n        this.$refs.foodsWrapper.$el.clientHeight / 3\n      );\n      //计算food-list的高度\n      let foodList = this.$refs.foodsWrapper.$el.getElementsByClassName(\n        \"food-list-hook\"\n      );\n      let height = this._initHeight;\n      this.listHeight.push(height);\n      for (let i = 0, l = foodList.length; i < l; i++) {\n        let item = foodList[i];\n        height += item.clientHeight;\n        this.listHeight.push(height);\n      }\n    },\n    selectMenu(index, e) {\n      //e._constructed，阻止非vue事件\n      if (!e._constructed) {\n        return;\n      }\n      let foodList = this.$refs.foodsWrapper.$el.getElementsByClassName(\n        \"food-list-hook\"\n      );\n      let el = foodList[index];\n      this.$refs.foodsWrapper.scrollToElement(el, 300, 0, this._initHeight);\n    },\n    loadData() {\n      Util.ajax\n        .post(\"/api/client/goods/readPart\", {\n          shopId: Cookies.get(\"shopId\")\n        })\n        .then(res => {\n          this.foodsList = res.data.data;\n          this.$nextTick(() => {\n            this._countHeight();\n          });\n        }) //失败返回\n        .catch(error => {\n          console.log(error);\n        });\n      // Util.ajax\n      //   .get(\"/api/goods\")\n      //   .then(res => {\n      //     this.foodsList = res.data.data.concat(this.foodsList);\n      //     this.$nextTick(() => {\n      //       this._countHeight();\n      //     });\n      //   }) //失败返回\n      //   .catch(error => {\n      //     console.log(error);\n      //   });\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.snacks {\n  display: flex;\n  position: absolute;\n  top: 147px;\n  bottom: 46px;\n  width: 100%;\n  overflow: hidden;\n\n  .menu-wrapper {\n    flex: 0 0 80px;\n    width: 80px;\n    background: #f3f5f7;\n    ul {\n      list-style-type: none;\n      margin: 0px;\n      padding: 0px;\n    }\n    .menu-item {\n      display: table;\n      height: 54px;\n      // width: 56px;\n      padding: 0 12px;\n      line-height: 14px;\n      .text {\n        display: table-cell;\n        width: 56px;\n        vertical-align: middle;\n        font-size: 12px;\n      }\n      &.current {\n        position: relative;\n        z-index: 10;\n        margin-top: -1px;\n        background: #fff;\n        //border-left: 3px solid #2d8cf0;\n        .text {\n          color: #00a0dc border-none;\n        }\n      }\n    }\n  }\n\n  .foods-wrapper {\n    flex: 1;\n    background: #fff;\n    ul {\n      list-style-type: none;\n      margin: 0px;\n      padding: 0px;\n    }\n    .title {\n      padding-left: 14px;\n      height: 26px;\n      line-height: 26px;\n      border-left: 2px solid #d9dde1;\n      font-size: 12px;\n      color: rgb(147, 153, 159);\n      background: #f3f5f7;\n    }\n    .food-item {\n      display: flex;\n      margin: 18px;\n      // padding-bottom: 9px;\n      border-bottom: 1px solid #e9eaec;\n      &:last-child {\n        border: none;\n        margin-bottom: 0;\n      }\n      .icon {\n        flex: 0 0 57px;\n        margin-right: 10px;\n      }\n      .content {\n        flex: 1;\n        .name {\n          margin: 2px 0 8px 0;\n          height: 14p;\n          line-height: 14px;\n          font-size: 14px;\n          color: rgb(7, 17, 27);\n        }\n        .desc,\n        .extra {\n          font-size: 10px;\n          color: rgb(147, 153, 159);\n        }\n        .desc {\n          margin-bottom: 8px;\n          line-height: 12px;\n        }\n        .extra {\n          line-height: 10px;\n          .count {\n            margin-right: 12px;\n          }\n        }\n        .price {\n          font-weight: 700;\n          line-height: 36px;\n          .now {\n            margin-right: 8px;\n            font-size: 14px;\n            color: rgb(240, 20, 20);\n          }\n          .old {\n            text-decoration: line-through;\n            font-size: 10px;\n            color: rgb(147, 153, 159);\n          }\n        }\n        .cartControl-wrapper {\n          position: absolute;\n          right: 15px;\n          // top: 92px;\n        }\n      }\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/goods/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"snacks\"},[_c('scroll',{ref:\"menuWrapper\",staticClass:\"menu-wrapper\",attrs:{\"data\":_vm.foodsList}},[_c('ul',_vm._l((_vm.foodsList),function(item,index){return _c('li',{key:index,staticClass:\"menu-item\",class:{'current': _vm.currentIndex === index},on:{\"click\":function($event){_vm.selectMenu(index,$event)}}},[_c('span',{staticClass:\"text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(item.name)+\"\\n\\t\\t\\t\\t\\t\")])])})),_vm._v(\" \"),_c('div',{staticClass:\"loading-wrapper\"})]),_vm._v(\" \"),_c('scroll',{ref:\"foodsWrapper\",staticClass:\"foods-wrapper\",attrs:{\"data\":_vm.foodsList,\"probeType\":3,\"listenScroll\":true},on:{\"scroll\":_vm.foodsScroll}},[_c('ul',_vm._l((_vm.foodsList),function(item,index){return _c('li',{key:index,staticClass:\"food-list food-list-hook\"},[_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('ul',_vm._l((item.foods),function(food,index){return _c('li',{key:index,staticClass:\"food-item\",on:{\"click\":function($event){_vm.selectFood(food,$event)}}},[_c('div',{staticClass:\"icon\"},[_c('img',{attrs:{\"src\":food.image,\"width\":\"57\",\"height\":\"57\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('h2',{staticClass:\"name\"},[_vm._v(_vm._s(food.name))]),_vm._v(\" \"),_c('p',{staticClass:\"desc\"},[_vm._v(_vm._s(food.description))]),_vm._v(\" \"),_c('div',{staticClass:\"extra\"},[_c('span',{staticClass:\"count\"},[_vm._v(\"月售\"+_vm._s(food.sellCount)+\"份\")]),_vm._v(\" \"),_c('span',[_vm._v(\"好评率\"+_vm._s(food.rating))])]),_vm._v(\" \"),_c('div',{staticClass:\"cartControl-wrapper\"},[_c('cartcontrol',{attrs:{\"food\":food},on:{\"add\":_vm.addFood}})],1),_vm._v(\" \"),_c('div',{staticClass:\"price\"},[_c('span',{staticClass:\"now\"},[_vm._v(\"¥\"+_vm._s(food.price))]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(food.oldPrice),expression:\"food.oldPrice\"}],staticClass:\"old\"},[_vm._v(\"¥\"+_vm._s(food.oldPrice))])])])])}))])})),_vm._v(\" \"),_c('div',{staticClass:\"loading-wrapper\"})]),_vm._v(\" \"),_c('shopcart',{ref:\"shopcart\",attrs:{\"select-foods\":_vm.selectFoods}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5ce06c28\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/goods/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5ce06c28\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5ce06c28\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5ce06c28\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/goods/index.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/assign.js\n// module id = woOf\n// module chunks = 1 2"],"sourceRoot":""}