webpackJsonp([9],{CGhI:function(t,n){},E51W:function(t,n){},IcnI:function(t,n,e){"use strict";var a=e("7+uW"),o=e("NYxO"),i=e("lbHh"),r=e.n(i);a.default.use(o.a);var c=new o.a.Store({state:{bNavShow:!0,shopId:null,user:null},mutations:{changeBNav:function(t,n){t.bNavShow=n},changeShopId:function(t,n){void 0!=n&&r.a.set("shopId",n),t.shopId=n},changeUser:function(t,n){void 0!=n&&r.a.set("userId",n.id),t.user=n},reduceMoney:function(t,n){t.user.money=t.user.money-n}}});n.a=c},JU1R:function(t,n,e){"use strict";e.d(n,"a",function(){return a});var a=[{path:"/",redirect:"/map"},{path:"/order",name:"order",meta:{title:"订单"},component:function(t){Promise.all([e.e(0),e.e(2)]).then(function(){var n=[e("e+iX")];t.apply(null,n)}.bind(this)).catch(e.oe)}},{path:"/map",name:"map",meta:{title:"地图"},component:function(t){e.e(7).then(function(){var n=[e("v6mk")];t.apply(null,n)}.bind(this)).catch(e.oe)}},{path:"/mine",name:"mine",meta:{title:"我的"},component:function(t){Promise.all([e.e(0),e.e(3)]).then(function(){var n=[e("RcQE")];t.apply(null,n)}.bind(this)).catch(e.oe)}},{path:"/shop",name:"shop",meta:{title:"商店"},component:function(t){Promise.all([e.e(1),e.e(0)]).then(function(){var n=[e("CSWx")];t.apply(null,n)}.bind(this)).catch(e.oe)},children:[{path:"/goods",name:"goods",meta:{title:"商品"},component:function(t){Promise.all([e.e(0),e.e(5)]).then(function(){var n=[e("uMyE")];t.apply(null,n)}.bind(this)).catch(e.oe)}},{path:"/ratings",name:"ratings",meta:{title:"评价"},component:function(t){Promise.all([e.e(0),e.e(6)]).then(function(){var n=[e("oHR0")];t.apply(null,n)}.bind(this)).catch(e.oe)}}]},{path:"/pay",name:"pay",meta:{title:"支付"},component:function(t){e.e(4).then(function(){var n=[e("UCxz")];t.apply(null,n)}.bind(this)).catch(e.oe)}}]},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("7+uW"),o=e("Xxa5"),i=e.n(o),r=e("exGp"),c=e.n(r),u=e("//Fk"),s=e.n(u),h=e("N6ty"),p=e.n(h),l=e("TVG1"),m=e("lbHh"),d=e.n(m),f=e("ybdn"),v={name:"App",data:function(){return{bottomNav:l.a.activeTab(),shopId:l.a.shopId()}},methods:{handleChange:function(t){this.bottomNav=t},getAuth:function(){return new s.a(function(t,n){l.a.ajax.post("/api/clientAuth",{fingerprint:(new p.a).get()}).then(function(n){t(n)}).catch(function(t){return n(new Error(t))})})},getUser:function(t){return new s.a(function(n,e){l.a.ajax.post("/api/client/userinfo",{discern:t}).then(function(t){return n(t)}).catch(function(t){return e(t)})})},loginType:function(){var t=this;this.$store.commit("changeShopId",this.shopId),this.getAuth().then(function(n){if(1===n.data.status)return d.a.set("token","Bearer "+n.data.data.token),t.getUser(n.data.data.discern)}).then(function(n){t.$store.commit("changeUser",n.data.data)}),void 0!=this.shopId&&this.$router.push({name:"shop"})}},mounted:function(){this.loginType()},created:function(){var t=this;return c()(i.a.mark(function n(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.AMap||!window.AMapUI){t.next=3;break}t.next=7;break;case 3:return t.next=5,Object(f.a)("https://webapi.amap.com/maps?v=1.4.6&key=c42fafbe4ea7bdba7423b409392a4a2b");case 5:return t.next=7,Object(f.a)("https://webapi.amap.com/ui/1.0/main.js");case 7:case"end":return t.stop()}},n,t)}))()}},b={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("keep-alive",[n("router-view")],1),this._v(" "),n("mu-paper",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.bNavShow,expression:"$store.state.bNavShow"}],staticClass:"my-bottom"},[n("mu-bottom-nav",{attrs:{value:this.bottomNav},on:{change:this.handleChange}},[n("mu-bottom-nav-item",{attrs:{value:"map",title:"地图",icon:"map",to:"/map"}}),this._v(" "),n("mu-bottom-nav-item",{attrs:{value:"order",title:"订单",icon:"assignment",to:"/order"}}),this._v(" "),n("mu-bottom-nav-item",{attrs:{value:"mine",title:"我的",icon:"person pin",to:"/mine"}})],1)],1)],1)},staticRenderFns:[]};var w=e("VU/8")(v,b,!1,function(t){e("CGhI")},"data-v-155945f6",null).exports,_=e("YaEn"),g=e("IcnI"),y=(e("mtWM"),e("u64Q")),I=e.n(y);e("E51W"),e("VrJe");a.default.use(I.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:_.a,store:g.a,components:{App:w},template:"<App/>"})},TVG1:function(t,n,e){"use strict";var a=e("//Fk"),o=e.n(a),i=e("mtWM"),r=e.n(i),c=e("lbHh"),u=e.n(c),s=e("YaEn"),h={title:function(t){t=t||"吃货",window.document.title=t},shopId:function(){return window.location.hash.split("=")[1]},activeTab:function(){return window.location.hash.split("/")[1]}};h.ajax=r.a.create({baseURL:"https://shaodushu.cn",timeout:3e4}),h.ajax.interceptors.request.use(function(t){var n=u.a.get("token");return null!=n&&(t.headers.common.Authorization=n),t},function(t){return o.a.reject(t)}),h.ajax.interceptors.response.use(function(t){return t.status,t},function(t){if(t.response)switch(t.response.data.status){case 401:window.alert("权限过期!"),s.a.replace({path:"/"});break;case 500:window.alert("服务器500");break;default:window.alert("服务器响应失败")}return o.a.reject(t.response.data)}),n.a=h},VrJe:function(t,n){},YaEn:function(t,n,e){"use strict";(function(t){var a=e("7+uW"),o=e("/ocq"),i=e("JU1R"),r=e("IcnI"),c=e("TVG1");a.default.use(o.a);var u={mode:"hash",base:t,routes:i.a},s=new o.a(u);s.beforeEach(function(t,n,e){c.a.title(t.meta.title),"shop"===t.name||"pay"===t.name?(e(),r.a.commit("changeBNav",!1)):(e(),r.a.commit("changeBNav",!0)),"shop"===n.name&&(null===t.name?e("/"):e())}),s.afterEach(function(){window.scrollTo(0,0)}),n.a=s}).call(n,"/")},ybdn:function(t,n,e){"use strict";n.a=function(t,n){return function(t){var a=document.createElement("script");document.body.appendChild(a);var i=new o.a(function(t,o){a.addEventListener("load",function(o){e(a),n||t(o)},!1),a.addEventListener("error",function(t){e(a),o(t)},!1),n&&(window.____callback____=function(){t(),window.____callback____=null})});n&&(t+="&callback=____callback____");return a.src=t,i}(t);function e(t){document.body.removeChild(t)}};var a=e("//Fk"),o=e.n(a)}},["NHnr"]);
//# sourceMappingURL=app.e32176716ee60b256712.js.map