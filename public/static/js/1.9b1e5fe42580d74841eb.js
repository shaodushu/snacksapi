webpackJsonp([1,5,6],{"1kS7":function(t,e){e.f=Object.getOwnPropertySymbols},CSWx:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("//Fk"),n=s.n(a),i=s("woOf"),o=s.n(i),r=s("bGai"),c=(s("N6ty"),s("TVG1")),l=s("lbHh"),d=s.n(l),u=s("uMyE"),h=s("oHR0"),f={name:"shop",data:function(){return{seller:{},activeTab:"tab1"}},components:{"s-header":r.d,"goods-view":u.default,"ratings-view":h.default},computed:{curShopId:function(){return this.$store.state.shopId}},watch:{curShopId:function(t){var e=this;this.getSeller(t).then(function(t){e.seller=o()({},e.seller,t.data.data)})}},methods:{handleTabChange:function(t){this.activeTab=t},getSeller:function(t){return new n.a(function(t,e){c.a.ajax.post("/api/client/shop/readOne",{shopId:d.a.get("shopId")}).then(function(e){return t(e)}).catch(function(t){return e(t)})})}},created:function(){var t=this;this.getSeller(this.$store.state.shopId).then(function(e){t.seller=o()({},t.seller,e.data.data)})}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"shop"}},[s("s-header",{attrs:{seller:t.seller}}),t._v(" "),s("mu-tabs",{attrs:{value:t.activeTab},on:{change:t.handleTabChange}},[s("mu-tab",{attrs:{value:"tab1",title:"商品"}}),t._v(" "),s("mu-tab",{attrs:{value:"tab2",title:"评论"}})],1),t._v(" "),s("goods-view",{directives:[{name:"show",rawName:"v-show",value:"tab1"===t.activeTab,expression:"activeTab === 'tab1'"}]}),t._v(" "),s("ratings-view",{directives:[{name:"show",rawName:"v-show",value:"tab2"===t.activeTab,expression:"activeTab === 'tab2'"}],attrs:{seller:t.seller}})],1)},staticRenderFns:[]};var p=s("VU/8")(f,v,!1,function(t){s("UJfT")},"data-v-b6109456",null);e.default=p.exports},Ez8v:function(t,e){},NpIQ:function(t,e){e.f={}.propertyIsEnumerable},R4wc:function(t,e,s){var a=s("kM2E");a(a.S+a.F,"Object",{assign:s("To3L")})},To3L:function(t,e,s){"use strict";var a=s("lktj"),n=s("1kS7"),i=s("NpIQ"),o=s("sB3e"),r=s("MU5D"),c=Object.assign;t.exports=!c||s("S82l")(function(){var t={},e={},s=Symbol(),a="abcdefghijklmnopqrst";return t[s]=7,a.split("").forEach(function(t){e[t]=t}),7!=c({},t)[s]||Object.keys(c({},e)).join("")!=a})?function(t,e){for(var s=o(t),c=arguments.length,l=1,d=n.f,u=i.f;c>l;)for(var h,f=r(arguments[l++]),v=d?a(f).concat(d(f)):a(f),p=v.length,m=0;p>m;)u.call(f,h=v[m++])&&(s[h]=f[h]);return s}:c},UJfT:function(t,e){},V3tA:function(t,e,s){s("R4wc"),t.exports=s("FeBl").Object.assign},oHR0:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("bGai"),n=s("fjIZ"),i=s("TVG1"),o=s("lbHh"),r=s.n(o),c={name:"ratings",props:{seller:{type:Object}},data:function(){return{ratings:[],selectType:2,onlyContent:!0}},created:function(){var t=this;i.a.ajax.post("/api/client/shop/ratings",{shopId:r.a.get("shopId")}).then(function(e){t.ratings=e.data.result})},methods:{needShow:function(t,e){return!(this.onlyContent&&!e)&&(2===this.selectType||t===this.selectType)},selectRating:function(t){var e=this;this.selectType=t,this.$nextTick(function(){e.$refs.ratings.refresh()})},toggleContent:function(){var t=this;this.onlyContent=!this.onlyContent,this.$nextTick(function(){t.$refs.ratings.refresh()})}},filters:{formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")}},components:{scroll:a.g,star:a.j,split:a.i,ratingselect:a.f}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("scroll",{ref:"ratings",staticClass:"ratings",attrs:{data:t.ratings}},[s("div",{staticClass:"ratings-content"},[s("div",{staticClass:"rating-wrapper"},[s("ul",t._l(t.ratings,function(e,a){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.needShow(e.rateType,e.text),expression:"needShow(rating.rateType, rating.text)"}],key:a,staticClass:"rating-item"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{width:"28",height:"28",src:"http://static.galileo.xiaojukeji.com/static/tms/default_header.png"}})]),t._v(" "),s("div",{staticClass:"content"},[s("h1",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"star-wrapper"},[s("star",{attrs:{size:24,score:e.score}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.deliveryTime,expression:"rating.deliveryTime"}],staticClass:"delivery"},[t._v(t._s(e.deliveryTime))])],1),t._v(" "),s("p",{staticClass:"text"},[t._v(t._s(e.text))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.recommend&&e.recommend.length,expression:"rating.recommend && rating.recommend.length"}],staticClass:"recommend"},[s("span",{staticClass:"icon-thumb_up"}),t._v(" "),t._l(e.recommend,function(e,a){return s("span",{key:a,staticClass:"item"},[t._v(t._s(e))])})],2),t._v(" "),s("div",{staticClass:"time"},[t._v("\n              "+t._s(t._f("formatDate")(e.rateTime))+"\n            ")])])])}))])])])},staticRenderFns:[]};var d=s("VU/8")(c,l,!1,function(t){s("Ez8v")},"data-v-241a5147",null);e.default=d.exports},uMyE:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("bGai"),n=s("TVG1"),i=s("lbHh"),o=s.n(i),r={name:"goods",data:function(){return{foodsList:[],listHeight:[],scrollY:0,_initHeight:null,selectedFood:{}}},components:{scroll:a.g,cartcontrol:a.a,shopcart:a.h,food:a.c},computed:{currentIndex:function(){for(var t=0,e=this.listHeight.length;t<e;t++){var s=this.listHeight[t],a=this.listHeight[t+1];if(!a||this.scrollY>=s&&this.scrollY<a)return t}return 0},selectFoods:function(){var t=[];return this.foodsList.forEach(function(e){e.foods.forEach(function(e){e.count&&t.push(e)})}),t},curShopId:function(){return this.$store.state.shopId}},watch:{curShopId:function(t){this.loadData()}},mounted:function(){this.loadData()},methods:{selectFood:function(t,e){e._constructed&&(this.selectedFood=t)},drop:function(t){var e=this;this.$nextTick(function(){e.$refs.shopcart.drop(t)})},addFood:function(t){this.drop(t)},foodsScroll:function(t){this.scrollY=Math.abs(Math.round(t.y));var e=this.$refs.menuWrapper.$el.getElementsByClassName("menu-item");this.$refs.menuWrapper.scrollToElement(e[this.currentIndex],300,0,this._initHeight)},_countHeight:function(){this._initHeight=-Math.round(this.$refs.foodsWrapper.$el.clientHeight/3);var t=this.$refs.foodsWrapper.$el.getElementsByClassName("food-list-hook"),e=this._initHeight;this.listHeight.push(e);for(var s=0,a=t.length;s<a;s++){e+=t[s].clientHeight,this.listHeight.push(e)}},selectMenu:function(t,e){if(e._constructed){var s=this.$refs.foodsWrapper.$el.getElementsByClassName("food-list-hook")[t];this.$refs.foodsWrapper.scrollToElement(s,300,0,this._initHeight)}},loadData:function(){var t=this;n.a.ajax.post("/api/client/goods/readPart",{shopId:o.a.get("shopId")}).then(function(e){t.foodsList=e.data.data,t.$nextTick(function(){t._countHeight()})}).catch(function(t){console.log(t)})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"snacks"},[s("scroll",{ref:"menuWrapper",staticClass:"menu-wrapper",attrs:{data:t.foodsList}},[s("ul",t._l(t.foodsList,function(e,a){return s("li",{key:a,staticClass:"menu-item",class:{current:t.currentIndex===a},on:{click:function(e){t.selectMenu(a,e)}}},[s("span",{staticClass:"text"},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")])])})),t._v(" "),s("div",{staticClass:"loading-wrapper"})]),t._v(" "),s("scroll",{ref:"foodsWrapper",staticClass:"foods-wrapper",attrs:{data:t.foodsList,probeType:3,listenScroll:!0},on:{scroll:t.foodsScroll}},[s("ul",t._l(t.foodsList,function(e,a){return s("li",{key:a,staticClass:"food-list food-list-hook"},[s("h1",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),s("ul",t._l(e.foods,function(e,a){return s("li",{key:a,staticClass:"food-item",on:{click:function(s){t.selectFood(e,s)}}},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:e.image,width:"57",height:"57"}})]),t._v(" "),s("div",{staticClass:"content"},[s("h2",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),s("p",{staticClass:"desc"},[t._v(t._s(e.description))]),t._v(" "),s("div",{staticClass:"extra"},[s("span",{staticClass:"count"},[t._v("月售"+t._s(e.sellCount)+"份")]),t._v(" "),s("span",[t._v("好评率"+t._s(e.rating))])]),t._v(" "),s("div",{staticClass:"cartControl-wrapper"},[s("cartcontrol",{attrs:{food:e},on:{add:t.addFood}})],1),t._v(" "),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("¥"+t._s(e.price))]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("¥"+t._s(e.oldPrice))])])])])}))])})),t._v(" "),s("div",{staticClass:"loading-wrapper"})]),t._v(" "),s("shopcart",{ref:"shopcart",attrs:{"select-foods":t.selectFoods}})],1)])},staticRenderFns:[]};var l=s("VU/8")(r,c,!1,function(t){s("vdr6")},"data-v-5ce06c28",null);e.default=l.exports},vdr6:function(t,e){},woOf:function(t,e,s){t.exports={default:s("V3tA"),__esModule:!0}}});
//# sourceMappingURL=1.9b1e5fe42580d74841eb.js.map